language: node_js
node_js: â€” "6"
install:
- npm install
sudo: required
services:
- docker
after_success:
- echo "$docker_pass" | docker login -u="$docker_user" --password-stdin
- docker build -t dieflo4711/devops_demo .
- docker tag dieflo4711/devops_demo dieflo4711/devops_demo:$TRAVIS_COMMIT
- docker push dieflo4711/devops_demo:$TRAVIS_COMMIT
- if [ ! -d "$HOME/google-cloud-sdk/bin" ]; then rm -rf $HOME/google-cloud-sdk; export
  CLOUDSDK_CORE_DISABLE_PROMPTS=1; curl https://sdk.cloud.google.com | bash; fi
- source /home/travis/google-cloud-sdk/path.bash.inc
- gcloud auth activate-service-account $gcloud_service_Acc --key-file ninth-victor-274922-332047e1472e.json
  --project $gcloud_project
- gcloud container clusters get-credentials $gcloud_cluster --zone $gcloud_zone --project
  $gcloud_project
- config current-context
- kubectl set image deployment/demo nodejs=dieflo4711/devops_demo:$TRAVIS_COMMIT --record=true
cache:
  directories:
  - "$HOME/google-cloud-sdk/"
env:
  global:
  - secure: o4wi6aNeKMib2OClgdZZHpUinljeRSGuLRooH4jnDVNXjZlkqIeh5nL5p3RZ8Z8kIPoztdUAd/27LIXL+dETJW4/Rp7mYStMvaVc3Duy0Q8qpbishEFQuBsIZ6avGvh/kGPd/CE+fMGyOKvR2UN7gyFfVWTdTB/ZVU9vGGWG79HKE25UyxPMP3pR0iH3OA8dmK/uleSLRVJSM5YPTgj+QuN0C6/XkAX6FiNzd8U4M5vKdDLSuXrrABglfxHDmE6GRJSg7Ed5cP6dTtHC6Rlbue9IKwwR4+lZm681qpzAcWOPbIIRhXnDHMy0TcmeHp1dGZsSxr8VD2iuwxDe4zm38vDyj4/QUZQlOYhQVPYOECh5rlOQmJ+PlwLRaeX157j8sQVCISya7xme2Xes/N4U0d+DkItbjXhGo+rUctP2+QjTMZTBMPrlcbiEZcHVsQIALMddUXU5WxNgOvkmOYUqVjG5o0K//GkPWAszFrZVr5lZoNPvNplYNPyh63q9RCmzyu/JWQZF3e2N7stOaC/ZJCXnOsjvF84w7on70Ta2JDsJ0Xs2+xPep9qUtQvG2Z+TGMDmqZvLD/na6PDK/E9j6wgPXvJhLSzs3V7Ghd7NhKRINnr/Vm0y6JSXLZ4MuuSu7qZTFsjf+6I7s2oFthLE/n8bB73oSG9csz3hQ3AXSkU=
  - secure: OyRN0/5kfJb8Pt/2pg4vDUlNp9cCURkdVF/sTmXbRO6ilfFJ2q4o8dCBCawh930kt68xyAxgMFy4F4h9mz5mCTl0H6ZdpaxGA3SxjpozpOjer4mBSeYIb6XReJOyGpBxE8/4hCjGHw4tEQPEjxwA+x+iSREOJPoohIuQV2GgwAQAL6vNlXUTU6axjFpPDeAjfvOefbgDmDYQFP8e2do2+wUN2M9oeco/rzTWEnBP9z3BFEDBBYW0fxjk4OzVYtPTzDPht5wIDNe/ldYXUhWiYQf+u6mD6HLHNKXoQvI3/0aUbdHDKgwNFDobeiIDUhSWj7uZ8WlMgGYp1PpZnNtDGYgQkaG7GoLIUDmNY9vqX/6KFxzXVrs+5WYayeYDhkvF//y7/uBgxHJQovC8SXK5fO/uykiYYkRUEoT81QG0P1Dnw6FDUPe0HmF9zp4woW5IcE9lx5pLolMRFSfVfUuGk66MPVQNKWQ7yLJDDz63IHGu/xo+2gukldlDOByQThN4lL2q+JS5cKFnVr9D52TzhOxvW6OUyz/SCaDBTDx8a1GshJDtf1jls0PqeVBZh/zRhD8OQrdGZCWD3c7LHNCCkCYKzv+KAjj1h4bErng2Qvs6oPrxpSC5YPMSxPPinOBocGSCAlgGcGoApmi/jxhxO2yiUevUuS41aZaieXt2lz4=
  - secure: P8R/nc47tp0xC1nu1XQRs3RttTAcevOhuDOh6pmzpJ0fkftFEZATKXP5Anrv7j8sxKsdO/uPO50qO6MU70a9G9IAAJj7R73n3Jf9Ub8Br8BLxRtX6NYU030GyAAy3sE2JzFl2V5QWmfM0diXU0TPqJF6hFgOJkukJ7jh0bbOxE91rZ7jN5jRKMry4h59s6H3JjYseVnCyWfMXy6NqHLRNDwmTlyrXTnvHFOoaqHdBugJbTSvTeUfM3VP3hH3Pjic21aDg+emG4q+1dj0UxOeQbauLDP3BniGAxr3vn+JwDphfcN/AaQarAedg+wLPvhep7XkSBVWHSTdZC0Nem1OR3jlmQouzTbqLeN5HRMBqXd7hn2exwKTITyLQUdw+Woq4gEFjl0DRcMODK4akDnsgR/tjeAv9Z3DGmt2AZsuIkw/N1LvxWJM2IQp+kF/NOo/jUtRy2afE7bXvk28glRwwInuXlBO5Nh7p4XcJGK7AxfiVS/Wbeo0kUqfyBUnCUil3YEVohYtue0DhjHWM45jyoWCkV0HtRfj4IKwClAHQQNaorYtX2LEeYMZGHSSA4n4iMFwzHKfT2Og4gb5UMyqxniJbPBXFDxUg4HtnwJhH9YeIgZ4lJmp8LuyXZNXup8fBNUVlrxzr8uBwvkm+HvLc5XNGRkdIv8lplHDoVW6sbo=
  - secure: PPkA/esWsqHg8XF6wi2lFHnIUqwM0Gy4a5Pjo0PZv0RE8T0lcHSJWuFW7sFrntzTjpyM9xFojj9ZuYY6MrEPupyt8O+N4gMvVqvT0Dw3NBqLE7fefxTZs3bcyNBAx7BS+JQP52BspZFwVp6EbAP2ZJ6/IH5wFVY9nvpMfnz/1LanXeVnAwhYTlIUdfbrqAqcoLc2gj1FZ02oznn9jAe1tXPx3XwNoVGLuceDRmls7DfwKMR9mYCWynswdn5SbPIW8xFLha+fHA0TteAGJjEt1Ts4KlHzOFmJ6oTj8hJnwpjHrbomydcssWKe1rmM1I3aumPadkLV6bvdlb9RIfiCIPfc4b2ZQ1xY1Ml6uRb3vJ2NfYhgpc0sFEBrpq/jgSHw6niZxMjVqDV4uRccQQzcE6Z4D4Zwfsq5couo45YTY/LsqMo7GbYRfepqmSz27hz4gTf5gdF06WXMwriI49KOSAs+0wN2DGoTiRmVY5l1xkaLu79HmvD7FkQBBGLDQmaVJyUy2pThRypYZGEuB5OykpJ6fKa0bxeeuaGxq+Ys1ZKzCA2NmO5aqT55iA/DeSzbKMpEgNA+AhMnyZ7nFNNo60JxLTE18fnYhaU9liaj94sHjZwMqNGh5INdjlJSSBNoKv4s/8cMv060YXasBwlaCy1nOca/vbCKK/KeNJL90bg=
  - secure: M8ENcFQfJMtU9vtO8Bbnn+TPKaAVtXmwrcNd1M8kYhPfWzKLZq3hsg2rcI3CP0xXwpdOeKF6TTmmxQvHP/FVyBpQDi+9LklYJPT136RlLJRnEOXn5qHFZDbt+s4QgV7qIjGTI1Bxd5+beDL0sgBDM7WXRxo0x7kZiFT2mLR9445rE6w6HOl5xGRFum23r3y56+MrK/FwK5f7AvW3RA/iq8lwlydemy8LI7IX6ZAp3Wwe2+OOFwOTXUxJXFZ/bwrowhPLGuviAPdH9agjgMxpA8Ha/O/7wOC4IXX/kKuAXaugIkPt3OEjpE3M02JegL/K0woyXRYUaYEI3m/kKW0mVEtAJO6r8qqudhwMbcJ4yHPtpf9ezuxdZQPCBstzJCDDTdxVl58WpKwQHuBBpaxX26a7BrHXgTDWt6c0i2PCM2oMGqUpXJ1/IM5M6DPuTFw1lYS6kPaSSErOQXNz2mqOzV9IoW8eF+wG5TUJu5i648MF6ezfNAdCqgSz+mjArb0d0h26WH4O1bwKwcB4qGeeEIdbp/mEBSUePB7rNnhiUXX3W2VdvK27qtcBdhATy96C+AJyOBeskcifTtxom01cWIclQt6tB5jQyGWQp3v1VLsWc7xuE/D5U3yZdmIJ8/M8KOSU7DORKc+n3Rcy1n9R01PwsGzcey18qZO6cl3I2JI=
  - secure: HIViXJQkigI5N+F4FIG8aLZLipp8FeKwMT4y1CEaeDzAcYYlriryLIRiCiU/t350OaWH/JZ9IeEaY/doGsk4UoCpaZvCI8U60KU/BkAPVKeyKmiFluEp20c+f1AE4IwWKXapy+T8Oz5VoVw377IkTWOw2v0kyaeeij3urr2PM2sjiKSVBKO+eOThfqIBYJAf4NnqNbTCa4pFoaNlNIM9mTGqwn6oNrQqmrwDFh0mJxO4qCCscHGDj/R3K8jRlUCtjOWirubZLfAq6UCHQcF5zfZ2eA5SfuhJ5KLi2DFV0EzfO4UzcK4cU3iBhDH/uqYAjshyem+jE45JMISdUlK5nrCG5/muSZL6HoMiPeWKtZvVxKGLin0q341I9n3l4rhj0qfV1JAoLZHb4HslPnjBUeqRVahpyccHP/ubSfkpIIfvfxfYFzDB6zjGRsvE+W93bTxxmnaMzWyh7mU/RgTuFeMw2gjfG2aJwBrNe76SmVYmJ8QO+YY0jjWrNIgAOJZk6qfBJ7IvdlkjBEKJrSHzAKKdtwP/Dj50NowrRTXtJmB6wyqYAinw+8OqgHptMOBRdEVbnt+NFeopPCSd0kzMVOgAf5RJwfo/aUo0rqyMajFYEgXb+e6a0rJNVNSJrsG/lMMQkwKhABdOizO8SR2ckbq7PL7vo76adGm9es7uNuE=
  - secure: NDO5ydZ616RKsIx1viUM5R9YQLfGYkajcD+3gpa1q9f3lFnlVrhWoJ+RmgGYd1GMteyBJ74maFGenkartwKcHhwKhx8kXYyQRoZFds1Zr9pMtI1qw96gpJNItzXxFt/hVNEwPhPkO/qiskLuVXLgXuGwffXL07fPc+DbZ0stzOdz510THbzgOv97WLzNQx++RJma4PdcLBo0RClbfxW/3BuZwmY4yd48wNKx4HEqyWw/2P90XCYDTkacsfl72uyF7ryJ5hajwPGTMb2HUstv6F6R97xcwwlngEg97X/nF34tCivM00nVmYEwV2cmNnfynjIO2IuG76PclxkRiepJhJq6+spu0yYp2FbUhY8b20nS3B4l5fDqA5w/Rnv+WH+7Sx/LvMeUL1SHqBh81UDNk2lB9O9JbBpruiulnOr4myn2yww4ND8e3jkuFgtWvWUFcHrk/cnpy74iVcv9LfnmK/1MDMTaixwu4ZSQAJUJyJ4n8tUAr+MXQsve3/FDjDE+ZWHc6vJ6JqEYqrkoi7EP8j+yKxUCg0uCWGz0MIsdTIQ+W6H53CES47f3+QEteOqY0DZQWceJ0Man+suJCHTYTlIpe8Kh7QhufvDWSHSIzculhVEDr5nFsH9zdmW2i2faT3NOA8loIphRl0CbH0hj398E8xrLDW115BE9yDoPRcU=
  - secure: EEaSK+awClcd/hY17gi3EH8xZ8liB1pZoPOuSKSs04AGZw9X9uYk0GCdAY28yL4AYaSByG4kEPS7e8NzHIdi/eibgzBK3fsp9UNh0eBFYjTbNdaUIkZ+75Eagk+Bu3Sx2CYuoXdjxadgYgNdHhk4m+77zyqEzhzKi7X6ftFywaMu6Fg70AvqFWp96BpVH/vNHQEhZxbsNmZxNvIthmnMk+w6m25iLrl0MGsaKcJ6yzsnFRxvUA4JEgsAgvvgjfRJTg3c5WxTkSs/pSQ5JweBfpPHylMRxusDhxT12wo3ol+KREyWZ4OQVoQBlRuubAD3C7rL2aQAfBSrcBIAYstAcstB9bTx6zk4vTsab3AqMePfwKbcuVQMgQz/rwddffl/4eGS/zVRwih64x98y3g3acCC5EfsD23gsy7uMlGssVIAC6ic/SgXnXBvanAGM/GgWgKtDXw7PWGug4wVNNSaOFoE7AN/mBIKYULeZ5y1XllXjrwyki3XI+Ucd5H7REU0ehF61if0F2pIofw5Ih9yb5rtXzdHfYh3fzd1P6jrfCk62WD+CpJq7lCMI+senDomd9Fsiojvrh218cFPy6/i0vrB8KED6ggA2imtHPjilxY/Vrvfzvy6uHRBpe+0kX4RjK0txEDugXEPFcYWDwp3Q5wIRdyoHei6yzHIs0wrtdU=
before_install:
- openssl aes-256-cbc -K $encrypted_9f8d0de98a22_key -iv $encrypted_9f8d0de98a22_iv
  -in ninth-victor-274922-332047e1472e.json.enc -out ninth-victor-274922-332047e1472e.json
  -d
